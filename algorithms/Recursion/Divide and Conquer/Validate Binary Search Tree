class Solution:
    def isValidBST(self, root: Optional[TreeNode]) -> bool:

        def valid(node, min=-float('inf'), max=float('inf')):
            if not node:   #base case
                return True

            if not (min < node.val < max): #D&C
                return False
        return (valid(node.left, min, node.val) and valid(node.right, node.val, max))

    return valid(root)