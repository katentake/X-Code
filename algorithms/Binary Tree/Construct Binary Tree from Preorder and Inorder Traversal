# Definition for a binary tree node.
# class TreeNode:
#     def __init__(self, val=0, left=None, right=None):
#         self.val = val
#         self.left = left
#         self.right = right
class Solution:
    def buildTree(self, preorder: List[int], inorder: List[int]) -> Optional[TreeNode]:
        if not preorder or not inorder:
            return None

        # 2. 确定当前子树的根节点值
        # 前序遍历的第一个元素始终是根节点
        rootValue = preorder[0]
        # 3. 创建根节点对象
        root = TreeNode(rootValue)
        # 4. 在中序遍历中定位根节点的索引
        # 这个索引将 inorder 划分为：左子树 [0 : inorderIndex] 和 右子树 [inorderIndex+1 : ]
        inorderIndex = inorder.index(rootValue)

        # 5. 递归构造左子树
        # preorder 切片：从索引 1 开始，截取和中序左子树等长的部分 [1 : inorderIndex+1]
        # inorder 切片：根节点左侧的部分 [:inorderIndex]
        root.left = self.buildTree(preorder[1: inorderIndex+1], inorder[:inorderIndex])
        root.right = self.buildTree(preorder[inorderIndex+1:], inorder[inorderIndex+1:])

        # 7. 返回构造好的当前节点
        return root